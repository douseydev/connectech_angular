<div class="admin-page">
  <app-admin-sidebar></app-admin-sidebar>

  <div class="admin-container">
    <div class="page-header">
      <h1>Messages de Contact</h1>
      <div class="filter-buttons">
        <button class="filter-btn" [class.active]="filterStatus === 'all'" (click)="filterStatus = 'all'">
          Tous ({{ messages.length }})
        </button>
        <button class="filter-btn" [class.active]="filterStatus === 'new'" (click)="filterStatus = 'new'">
          Non lus ({{ unreadCount }})
        </button>
      </div>
    </div>

    <div class="messages-container" *ngIf="filteredMessages.length > 0">
      <div class="message-card" *ngFor="let msg of filteredMessages" [class.unread]="msg.status === 'new'">
        <div class="message-header">
          <div class="message-sender">
            <h4>{{ msg.name }}</h4>
            <p class="message-email">{{ msg.email }}</p>
          </div>
          <div class="message-meta">
            <span class="message-date">{{ msg.date }}</span>
            <span class="status-badge" [class]="msg.status">{{ msg.status === 'new' ? 'Nouveau' : msg.status === 'read'
              ? 'Consulté' : 'Répondu' }}</span>
          </div>
        </div>

        <div class="message-body">
          <p>{{ msg.message }}</p>
        </div>

        <div class="message-footer">
          <div class="contact-info">
            <span>
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" width="16" height="16" style="vertical-align: middle; margin-right: 4px;">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-2.824-2.389-5.197-4.762-7.586-7.586l1.293-.97c.362-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
              </svg>
              {{ msg.phone }}
            </span>
          </div>
          <div class="message-actions">
            <button class="btn-action reply" title="Répondre" (click)="replyMessage(msg)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                stroke="currentColor" width="18" height="18">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M7.5 8.25h9m-9 3h9m-9 3h3m-6.75 4.125l-3 3m0 0l-3-3m3 3V3.375m17.25 9h-12" />
              </svg>
            </button>
            <button class="btn-action delete" title="Supprimer" (click)="deleteMessage(msg.id)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                stroke="currentColor" width="18" height="18">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="empty-state" *ngIf="filteredMessages.length === 0">
      <div class="empty-icon-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          width="48" height="48" style="color: var(--gray-medium);">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
        </svg>
      </div>
      <p>Aucun message</p>
    </div>
  </div>
</div>